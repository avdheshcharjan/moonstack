<!DOCTYPE html>
<html>
<head>
    <title>Check Connected Wallet</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #0a0f1e;
            color: #fff;
        }
        .info {
            background: #1a2332;
            padding: 20px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .label {
            color: #888;
            margin-bottom: 5px;
        }
        .value {
            color: #4ade80;
            font-size: 16px;
            word-break: break-all;
        }
        button {
            background: #5b21b6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background: #7c3aed;
        }
    </style>
</head>
<body>
    <h1>üîç Wallet Connection Checker</h1>
    
    <div class="info">
        <div class="label">Connected Wallet Address (from localStorage):</div>
        <div class="value" id="storedAddress">-</div>
    </div>

    <div class="info">
        <div class="label">Chain ID (from localStorage):</div>
        <div class="value" id="storedChainId">-</div>
    </div>

    <div class="info">
        <div class="label">Current Wallet (from Web3 Provider):</div>
        <div class="value" id="currentAddress">-</div>
    </div>

    <div class="info">
        <div class="label">Current Chain ID:</div>
        <div class="value" id="currentChainId">-</div>
    </div>

    <button onclick="refreshWallet()">Refresh from Web3</button>
    <button onclick="clearStorage()">Clear Storage</button>

    <script>
        // Check localStorage
        const storedAddress = localStorage.getItem('moonstack_wallet_address');
        const storedChainId = localStorage.getItem('moonstack_chain_id');
        
        document.getElementById('storedAddress').textContent = storedAddress || 'Not connected';
        document.getElementById('storedChainId').textContent = storedChainId || 'Not set';

        // Check current wallet
        async function refreshWallet() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                    
                    document.getElementById('currentAddress').textContent = 
                        accounts.length > 0 ? accounts[0] : 'No wallet connected';
                    document.getElementById('currentChainId').textContent = 
                        parseInt(chainId, 16) + ' (' + chainId + ')';
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('currentAddress').textContent = 'Error: ' + error.message;
                }
            } else {
                document.getElementById('currentAddress').textContent = 'No Web3 provider found';
            }
        }

        function clearStorage() {
            localStorage.removeItem('moonstack_wallet_address');
            localStorage.removeItem('moonstack_chain_id');
            location.reload();
        }

        // Auto-refresh on load
        refreshWallet();
    </script>
</body>
</html>
